async function loadGallery(){
  const gallery = document.getElementById('gallery');
  gallery.innerHTML = '<p class="muted">Loadingâ€¦</p>';
  try {
    const res = await fetch('/images.json', {cache: "no-cache"});
    if (!res.ok) throw new Error('images.json not found');
    const images = await res.json();
    if (!images.length) {
      gallery.innerHTML = '<p class="muted">No photos yet. Upload images to the /images folder and add entries to images.json.</p>';
      return;
    }
    gallery.innerHTML = '';
    images.forEach(img => {
      const card = document.createElement('div');
      card.className = 'card';
      const imageEl = document.createElement('img');
      imageEl.src = 'images/' + encodeURIComponent(img.filename);
      imageEl.alt = img.caption || img.filename;
      const caption = document.createElement('div');
      caption.className = 'caption';
      caption.textContent = img.caption || '';
      card.appendChild(imageEl);
      card.appendChild(caption);
      gallery.appendChild(card);
    });
  } catch (err) {
    gallery.innerHTML = '<p class="muted">Unable to load gallery. Make sure images.json exists in the repository root.</p>';
    console.error(err);
  }
}
document.addEventListener('DOMContentLoaded', loadGallery);
